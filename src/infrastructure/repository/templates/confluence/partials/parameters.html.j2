{# Operation Parameters Table #}
{# Works for both simple and preview templates #}
{% if operation.parameters %}
<div class="parameters-section">
    <h3 class="subsection-title">Parameters</h3>
    <table class="{% if confluence_preview %}confluence-table{% else %}parameter-table{% endif %}">
        <thead>
            <tr>
                <th>Name</th>
                <th>Location</th>
                <th>Type</th>
                <th>Required</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            {% for param in operation.parameters %}
            <tr>
                <td>{% if confluence_preview %}<code>{{ param.name }}</code>{% else %}<span class="param-name">{{ param.name }}</span>{% endif %}</td>
                <td>{{ param.location }}</td>
                <td>
                    {% if param.schema %}
                        {% if param.schema.ref %}
                            {% set model_name = param.schema.ref.split('/')[-1] %}
                            {% if confluence_preview %}
                                <a href="javascript:showPage('schemas')" class="schema-link" title="View in Data Models">{{ model_name }}</a>
                            {% else %}
                                <a href="#schema-{{ model_name }}" class="schema-link">{{ model_name }}</a>
                            {% endif %}
                        {% elif param.schema.type %}
                            {% if confluence_preview %}<code>{{ param.schema.type }}</code>{% else %}<span class="param-type">{{ param.schema.type }}</span>{% endif %}
                        {% else %}
                            {% if confluence_preview %}<code>object</code>{% else %}<span class="param-type">object</span>{% endif %}
                        {% endif %}
                    {% else %}
                        {% if confluence_preview %}<code>string</code>{% else %}<span class="param-type">string</span>{% endif %}
                    {% endif %}
                </td>
                <td>
                    {% if param.required %}
                        {% if confluence_preview %}
                            <span class="status-lozenge status-warning">Required</span>
                        {% else %}
                            <span class="param-required">required</span>
                        {% endif %}
                    {% else %}
                        {% if confluence_preview %}
                            <span class="status-lozenge status-default">Optional</span>
                        {% else %}
                            <span class="text-muted">optional</span>
                        {% endif %}
                    {% endif %}
                </td>
                <td>{{ param.description or '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

